var _=Object.defineProperty;var u=(a,i,t)=>i in a?_(a,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[i]=t;var h=(a,i,t)=>(u(a,typeof i!="symbol"?i+"":i,t),t);(function(){"use strict";class a{constructor(t,e,o){h(this,"windowHeight","400");h(this,"windowWidth","600");h(this,"title",wp_dark_mode_social_share.title);h(this,"description",wp_dark_mode_social_share.description);this.channel=t,this.permalink=e,this.button=o}async counter(){const t=wp_dark_mode_social_share.ajax_url+"?action=wpdm_social_share_counter";var e={channel:this.channel,url:this.permalink,post_id:wp_dark_mode_social_share.post_id||0,security_key:wp_dark_mode_social_share.security_key||0,user_id:wp_dark_mode_social_share.user_id||0,user_agent:navigator.userAgent||""};const s=await(await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(e=s.data||{},s.success){this.saveToLocalStorage();const r=s.data.shares,n=this.button.closest("._social-share-container"),l=n.querySelectorAll("[data-channel]");l.length>0&&l.forEach(p=>{const m=p.getAttribute("data-channel"),w=r.find(c=>c.channel===m);if(w){const c=p.querySelector("._channel-count span");c&&(c.innerText=w.total||0)}});const d=n.querySelector("._total-share-count");d&&(d.querySelector("span:first-child").innerText=e.total||0)}}saveToLocalStorage(){const t={url:this.permalink,channel:this.channel};let e=localStorage.getItem("wpdm_social_share_shares");if(e)try{e=JSON.parse(e)}catch{e=[]}else e=[];e.push(t),localStorage.setItem("wpdm_social_share_shares",JSON.stringify(e))}share(){if(!(typeof this["before_"+this.channel]=="function"&&!this["before_"+this.channel]())){if(!["copy","more"].includes(this.channel))try{const t=wp_dark_mode_social_share.options.maximum_click_count||0;if(t===0||t=="")this.counter();else{let e=localStorage.getItem("wpdm_social_share_shares");if(e)try{e=JSON.parse(e)}catch{e=[]}else e=[];e.filter(s=>s.url===this.permalink&&s.channel===this.channel).length<t&&this.counter()}}catch(t){Log(t)}this.channel==="copy"&&this.counter(),typeof this[this.channel]=="function"&&this[this.channel](),typeof this["after_"+this.channel]=="function"&&this["after_"+this.channel]()}}more(){jQuery("._wpdm-social-share-modal").fadeIn(150),jQuery("._wpdm-social-share-modal-overlay").fadeIn(100)}copy(){const t=document.createElement("textarea");t.value=this.permalink,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()}after_copy(){if(this.button.querySelector("span._channel-name")){const e=this.button.querySelector("._channel-tooltip")||document.createElement("span");e.classList.add("_channel-tooltip"),e.classList.add("wp-dark-mode-ignore"),e.classList.add("not-slanted"),e.innerText=wp_dark_mode_social_share.labels.copied||"Copied",e.style.display="none",this.button.appendChild(e),jQuery(e).fadeIn(120),setTimeout(()=>{jQuery(e).fadeOut(120)},2e3)}}facebook(){window.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURI(this.permalink),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}twitter(){window.open("https://twitter.com/share?url="+encodeURI(this.permalink)+"&text="+encodeURI(this.title),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}linkedin(){window.open("https://www.linkedin.com/shareArticle?mini=true&url="+encodeURI(this.permalink)+"&title="+encodeURI(this.title),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}google(){window.open("https://plus.google.com/share?url="+encodeURI(this.permalink),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}pinterest(){window.open("https://pinterest.com/pin/create/button/?url="+encodeURI(this.permalink)+"&media="+encodeURI(wp_dark_mode_social_share.image)+"&description="+encodeURI(this.title),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}tumblr(){window.open("https://www.tumblr.com/share/link?url="+encodeURI(this.permalink)+"&name="+encodeURI(wp_dark_mode_social_share.title)+"&description="+encodeURI(wp_dark_mode_social_share.description),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}reddit(){window.open("https://reddit.com/submit?url="+encodeURI(this.permalink)+"&title="+encodeURI(wp_dark_mode_social_share.title),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}stumbleupon(){window.open("https://www.stumbleupon.com/submit?url="+encodeURI(this.permalink)+"&title="+encodeURI(wp_dark_mode_social_share.title),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}delicious(){window.open("https://delicious.com/save?url="+encodeURI(this.permalink)+"&title="+encodeURI(wp_dark_mode_social_share.title),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}evernote(){window.open("https://www.evernote.com/clip.action?url="+encodeURI(this.permalink)+"&title="+encodeURI(wp_dark_mode_social_share.title),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}wordpress(){window.open("https://wordpress.com/press-this.php?u="+encodeURI(this.permalink)+"&t="+encodeURI(wp_dark_mode_social_share.title)+"&s="+encodeURI(wp_dark_mode_social_share.description),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}pocket(){window.open("https://getpocket.com/save?url="+encodeURI(this.permalink)+"&title="+encodeURI(wp_dark_mode_social_share.title),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}email(){window.open("mailto:?subject="+encodeURI(wp_dark_mode_social_share.title)+"&body="+encodeURI(this.permalink),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}print(){window.print()}whatsapp(){window.open("https://api.whatsapp.com/send?text="+encodeURI(wp_dark_mode_social_share.title)+" "+encodeURI(this.permalink),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}sms(){window.open("sms:?body="+encodeURI(wp_dark_mode_social_share.title)+" "+encodeURI(this.permalink),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}messenger(){window.open("https://www.facebook.com/dialog/send?app_id=6292016320814619&link="+encodeURI(this.permalink)+"&redirect_uri="+encodeURI(this.permalink),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}telegram(){window.open("https://telegram.me/share/url?url="+encodeURI(this.permalink)+"&text="+encodeURI(wp_dark_mode_social_share.title),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.windowHeight+",width="+this.windowWidth)}instagram(){const t=`https://www.instagram.com/create/story/?url=${encodeURI(this.permalink)}`;window.open(t,"",`menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=${this.windowHeight},width=${this.windowWidth}`)}chatgpt(){const t=this.getChannelPrompt("chatgpt"),e=this.processPromptVariables(t),o="https://chat.openai.com/?q="+encodeURIComponent(e);window.open(o,"_blank")}grok(){const t=this.getChannelPrompt("grok"),e=this.processPromptVariables(t),o="https://grok.com/?q="+encodeURIComponent(e);window.open(o,"_blank")}perplexity(){const t=this.getChannelPrompt("perplexity"),e=this.processPromptVariables(t),o="https://www.perplexity.ai/search/new?q="+encodeURIComponent(e);window.open(o,"_blank")}gemini(){const t=this.getChannelPrompt("gemini"),e=this.processPromptVariables(t),o="https://www.google.com/search?udm=50&source=searchlabs&q="+encodeURIComponent(e);window.open(o,"_blank")}claude(){const t=this.getChannelPrompt("claude"),e=this.processPromptVariables(t),o="https://claude.ai/new?q="+encodeURIComponent(e);window.open(o,"_blank")}getChannelPrompt(t){console.log(`Getting prompt for channel: ${t}`);const o=(wp_dark_mode_social_share.options||{}).channels||[];console.log("Saved user channels:",o);const s=o.find(l=>l.id===t);if(s&&s.prompt)return console.log(`Found SAVED custom prompt for ${t}:`,s.prompt),s.prompt;const n=(wp_dark_mode_social_share.channels||[]).find(l=>l.id===t);return n&&n.prompt?(console.log(`Using PHP default prompt for ${t}:`,n.prompt),n.prompt):(console.log(`Using fallback prompt for ${t}`),"Visit this URL: {page_url} and summarize the content for me.")}processPromptVariables(t){const e={"{page_title}":wp_dark_mode_social_share.title||document.title||"","{page_url}":this.permalink||wp_dark_mode_social_share.permalink||window.location.href,"{site_name}":wp_dark_mode_social_share.site_name||"","{site_url}":wp_dark_mode_social_share.site_url||window.location.origin,"{language}":wp_dark_mode_social_share.language||"en"};let o=t;for(const[s,r]of Object.entries(e)){const n=new RegExp(s.replace(/[{}]/g,"\\$&"),"g");o=o.replace(n,r)}return o}}(function(){class i{constructor(){h(this,"triggerShare",e=>{const o=e.target.closest(".wpdm-social-share-button"),s=o.dataset.channel,r=wp_dark_mode_social_share.permalink||window.location.href;new a(s,r,o).share()});this.bindEvents()}bindEvents(){const e=document.querySelectorAll(".wpdm-social-share-button[data-channel]");e&&e.length&&e.forEach(o=>{o.addEventListener("click",this.triggerShare.bind(this))}),jQuery(document).on("click","._wpdm-social-share-modal-close, ._wpdm-social-share-modal-overlay",function(o){o.preventDefault(),jQuery("._wpdm-social-share-modal").fadeOut(100),jQuery("._wpdm-social-share-modal-overlay").fadeOut(100)})}}document.addEventListener("DOMContentLoaded",function(){new i})})(jQuery)})();
//# sourceMappingURL=social-share.min.js.map
